{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/bitflow_lms/edu-bit-lms/bitflow-frontend/apps/admin/app/results/create/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { ArrowLeft, Save, Award } from \"lucide-react\";\r\n\r\n// Validation schema\r\nconst resultSchema = z.object({\r\n  studentId: z.string().min(1, \"Student is required\"),\r\n  examId: z.string().min(1, \"Exam is required\"),\r\n  marksObtained: z.coerce.number().min(0, \"Marks must be 0 or greater\"),\r\n  maxMarks: z.coerce.number().min(1, \"Max marks is required\"),\r\n  remarks: z.string().optional(),\r\n}).refine((data) => data.marksObtained <= data.maxMarks, {\r\n  message: \"Marks obtained cannot exceed max marks\",\r\n  path: [\"marksObtained\"],\r\n});\r\n\r\ntype ResultFormData = z.infer<typeof resultSchema>;\r\n\r\nexport default function CreateResultPage() {\r\n  const router = useRouter();\r\n  const queryClient = useQueryClient();\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const { register, handleSubmit, formState: { errors }, watch } = useForm<ResultFormData>({\r\n    resolver: zodResolver(resultSchema),\r\n    defaultValues: { maxMarks: 100 },\r\n  });\r\n\r\n  const marksObtained = watch(\"marksObtained\");\r\n  const maxMarks = watch(\"maxMarks\");\r\n\r\n  // Calculate grade\r\n  const calculateGrade = (obtained: number, max: number) => {\r\n    const percentage = (obtained / max) * 100;\r\n    if (percentage >= 90) return { grade: \"A+\", gp: 10.0 };\r\n    if (percentage >= 80) return { grade: \"A\", gp: 9.0 };\r\n    if (percentage >= 70) return { grade: \"B+\", gp: 8.0 };\r\n    if (percentage >= 60) return { grade: \"B\", gp: 7.0 };\r\n    if (percentage >= 50) return { grade: \"C+\", gp: 6.0 };\r\n    if (percentage >= 40) return { grade: \"C\", gp: 5.0 };\r\n    if (percentage >= 33) return { grade: \"D\", gp: 4.0 };\r\n    return { grade: \"F\", gp: 0.0 };\r\n  };\r\n\r\n  const currentGrade = marksObtained && maxMarks ? calculateGrade(marksObtained, maxMarks) : null;\r\n  const percentage = marksObtained && maxMarks ? ((marksObtained / maxMarks) * 100).toFixed(1) : null;\r\n\r\n  const createMutation = useMutation({\r\n    mutationFn: async (data: ResultFormData) => {\r\n      await new Promise((resolve) => setTimeout(resolve, 1000));\r\n      console.log(\"Creating result:\", data);\r\n      return data;\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: [\"results\"] });\r\n      router.push(\"/results\");\r\n    },\r\n  });\r\n\r\n  const onSubmit = async (data: ResultFormData) => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      await createMutation.mutateAsync(data);\r\n    } catch (error) {\r\n      console.error(\"Error creating result:\", error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"mb-6\">\r\n        <Link href=\"/results\" className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700 mb-4\">\r\n          <ArrowLeft className=\"w-4 h-4 mr-1\" />\r\n          Back to Results\r\n        </Link>\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Add Result</h1>\r\n        <p className=\"text-sm text-gray-500 mt-1\">Enter exam result and marks for a student</p>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit(onSubmit)} className=\"max-w-3xl\">\r\n        <div className=\"bg-white rounded-lg border border-gray-200 p-6 mb-6\">\r\n          <div className=\"flex items-center gap-2 mb-4\">\r\n            <Award className=\"w-5 h-5 text-gray-400\" />\r\n            <h2 className=\"text-lg font-semibold text-gray-900\">Result Details</h2>\r\n          </div>\r\n          <div className=\"space-y-4\">\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Student *</label>\r\n                <select {...register(\"studentId\")} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\r\n                  <option value=\"\">Select Student</option>\r\n                  <option value=\"1\">Raj Kumar - CS2021001</option>\r\n                  <option value=\"2\">Priya Sharma - CS2021002</option>\r\n                  <option value=\"3\">Amit Patel - CS2021003</option>\r\n                </select>\r\n                {errors.studentId && <p className=\"text-red-500 text-sm mt-1\">{errors.studentId.message}</p>}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Exam *</label>\r\n                <select {...register(\"examId\")} className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\">\r\n                  <option value=\"\">Select Exam</option>\r\n                  <option value=\"1\">Data Structures Midterm</option>\r\n                  <option value=\"2\">DBMS Final Exam</option>\r\n                  <option value=\"3\">OS Quiz 1</option>\r\n                </select>\r\n                {errors.examId && <p className=\"text-red-500 text-sm mt-1\">{errors.examId.message}</p>}\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Marks Obtained *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  {...register(\"marksObtained\")}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\r\n                  placeholder=\"e.g., 85\"\r\n                />\r\n                {errors.marksObtained && <p className=\"text-red-500 text-sm mt-1\">{errors.marksObtained.message}</p>}\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Maximum Marks *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  {...register(\"maxMarks\")}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\r\n                  placeholder=\"e.g., 100\"\r\n                />\r\n                {errors.maxMarks && <p className=\"text-red-500 text-sm mt-1\">{errors.maxMarks.message}</p>}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Grade Preview */}\r\n            {currentGrade && percentage && (\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <h3 className=\"text-sm font-medium text-blue-900 mb-2\">Grade Preview</h3>\r\n                <div className=\"grid grid-cols-3 gap-4\">\r\n                  <div>\r\n                    <p className=\"text-xs text-blue-700\">Percentage</p>\r\n                    <p className=\"text-xl font-bold text-blue-900\">{percentage}%</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-blue-700\">Grade</p>\r\n                    <p className=\"text-xl font-bold text-blue-900\">{currentGrade.grade}</p>\r\n                  </div>\r\n                  <div>\r\n                    <p className=\"text-xs text-blue-700\">Grade Point</p>\r\n                    <p className=\"text-xl font-bold text-blue-900\">{currentGrade.gp}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Remarks</label>\r\n              <textarea\r\n                {...register(\"remarks\")}\r\n                rows={3}\r\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg\"\r\n                placeholder=\"Optional remarks...\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2\"\r\n          >\r\n            <Save className=\"w-4 h-4\" />\r\n            {isSubmitting ? \"Saving...\" : \"Save Result\"}\r\n          </button>\r\n          <Link href=\"/results\" className=\"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200\">\r\n            Cancel\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}